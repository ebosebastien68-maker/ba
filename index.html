<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceBank - √âpargne & Pr√™t 3D</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babylonjs/5.57.1/babylon.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            background: #000;
            color: #fff;
        }

        #renderCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            outline: none;
        }

        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        .ui-overlay * {
            pointer-events: auto;
        }

        #intro {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s, visibility 1s;
        }

        #intro.hidden {
            opacity: 0;
            visibility: hidden;
        }

        #intro h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 2s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        @keyframes glow {
            0%, 100% { filter: drop-shadow(0 0 10px #ffd700); }
            50% { filter: drop-shadow(0 0 30px #ffd700); }
        }

        #intro .loader {
            font-size: 1.5rem;
            color: #ffd700;
            margin-top: 20px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 50px;
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(15px);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 5px 30px rgba(255, 215, 0, 0.2);
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        nav {
            display: flex;
            gap: 30px;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s;
            position: relative;
            padding: 5px 10px;
        }

        nav a:hover {
            color: #ffd700;
            transform: translateY(-2px);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #ffd700;
            transition: width 0.3s;
        }

        nav a:hover::after {
            width: 100%;
        }

        .auth-btns {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #0a0e27;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: #ffd700;
            border: 2px solid #ffd700;
        }

        .btn-secondary:hover {
            background: #ffd700;
            color: #0a0e27;
        }

        .scene-ui {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 50;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 0 20px;
        }

        .scene-button {
            padding: 15px 40px;
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            border-radius: 50px;
            color: #ffd700;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
        }

        .scene-button:hover {
            background: #ffd700;
            color: #0a0e27;
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6);
        }

        .scene-button.active {
            background: #ffd700;
            color: #0a0e27;
        }

        .info-panel {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(15px);
            border: 2px solid #ffd700;
            border-radius: 20px;
            padding: 30px;
            max-width: 350px;
            z-index: 50;
            box-shadow: 0 10px 50px rgba(255, 215, 0, 0.4);
            opacity: 0;
            transition: opacity 0.5s;
        }

        .info-panel.visible {
            opacity: 1;
        }

        .info-panel h2 {
            color: #ffd700;
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .info-panel p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .info-panel .stat {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
        }

        .info-panel .stat-label {
            color: rgba(255, 255, 255, 0.7);
        }

        .info-panel .stat-value {
            color: #ffd700;
            font-weight: bold;
        }

        .form-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid #ffd700;
            border-radius: 30px;
            padding: 50px;
            z-index: 200;
            min-width: 400px;
            box-shadow: 0 30px 80px rgba(255, 215, 0, 0.5);
        }

        .form-modal.active {
            display: block;
            animation: modalIn 0.5s;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .form-modal h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #ffd700;
            font-size: 2.5rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ffd700;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #ffd700;
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .close-modal:hover {
            transform: rotate(90deg);
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 199;
        }

        .overlay.active {
            display: block;
        }

        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
            }
            
            nav {
                display: none;
            }
            
            .form-modal {
                min-width: 90%;
                padding: 30px;
            }

            .info-panel {
                right: 10px;
                left: 10px;
                max-width: none;
                padding: 20px;
            }

            .scene-ui {
                bottom: 20px;
            }

            .scene-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div id="intro">
        <h1>üí∞ FinanceBank 3D</h1>
        <div class="loader">Chargement de votre exp√©rience immersive...</div>
    </div>

    <canvas id="renderCanvas"></canvas>

    <div class="ui-overlay">
        <div class="overlay" id="overlay"></div>

        <header>
            <div class="logo">üí∞ FinanceBank</div>
            <nav>
                <a href="#" onclick="changeScene('accueil')">Accueil</a>
                <a href="#" onclick="changeScene('epargne')">√âpargne</a>
                <a href="#" onclick="changeScene('prets')">Pr√™ts</a>
                <a href="#" onclick="changeScene('investissement')">Investissement</a>
            </nav>
            <div class="auth-btns">
                <button class="btn btn-secondary" onclick="openModal('login')">Connexion</button>
                <button class="btn btn-primary" onclick="openModal('register')">Inscription</button>
            </div>
        </header>

        <div class="info-panel" id="infoPanel">
            <h2 id="panelTitle">Bienvenue</h2>
            <p id="panelDescription">D√©couvrez nos services bancaires en 3D</p>
            <div id="panelStats"></div>
        </div>

        <div class="scene-ui">
            <button class="scene-button active" onclick="changeScene('accueil')">üè† Accueil</button>
            <button class="scene-button" onclick="changeScene('epargne')">üí∞ √âpargne</button>
            <button class="scene-button" onclick="changeScene('prets')">üè¶ Pr√™ts</button>
            <button class="scene-button" onclick="changeScene('investissement')">üìà Investissement</button>
        </div>

        <div class="form-modal" id="loginModal">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h2>Connexion</h2>
            <form onsubmit="return false;">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" placeholder="votre@email.com" required>
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                    Se connecter
                </button>
            </form>
        </div>

        <div class="form-modal" id="registerModal">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h2>Inscription</h2>
            <form onsubmit="return false;">
                <div class="form-group">
                    <label>Nom complet</label>
                    <input type="text" placeholder="Jean Dupont" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" placeholder="votre@email.com" required>
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <div class="form-group">
                    <label>Confirmer le mot de passe</label>
                    <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                    S'inscrire
                </button>
            </form>
        </div>
    </div>

    <script>
        const canvas = document.getElementById("renderCanvas");
        const engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
        let scene, camera, currentScene = 'intro';
        let sceneObjects = [];

        function createScene() {
            scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color4(0.02, 0.05, 0.1, 1);

            camera = new BABYLON.ArcRotateCamera("camera", 0, Math.PI / 3, 20, BABYLON.Vector3.Zero(), scene);
            camera.attachControl(canvas, true);
            camera.lowerRadiusLimit = 10;
            camera.upperRadiusLimit = 40;
            camera.wheelPrecision = 50;

            const light1 = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);
            light1.intensity = 0.6;

            const light2 = new BABYLON.PointLight("light2", new BABYLON.Vector3(5, 5, 5), scene);
            light2.diffuse = new BABYLON.Color3(1, 0.84, 0);
            light2.intensity = 0.8;

            const light3 = new BABYLON.PointLight("light3", new BABYLON.Vector3(-5, 3, -5), scene);
            light3.diffuse = new BABYLON.Color3(0.5, 0.7, 1);
            light3.intensity = 0.5;

            createDancingAvatar();

            setTimeout(() => {
                document.getElementById('intro').classList.add('hidden');
                setTimeout(() => {
                    changeScene('accueil');
                }, 1000);
            }, 10000);

            return scene;
        }

        function createDancingAvatar() {
            const body = BABYLON.MeshBuilder.CreateCylinder("body", {height: 2.5, diameter: 1}, scene);
            body.position.y = 1.5;
            const bodyMat = new BABYLON.StandardMaterial("bodyMat", scene);
            bodyMat.diffuseColor = new BABYLON.Color3(0.2, 0.3, 0.6);
            bodyMat.emissiveColor = new BABYLON.Color3(0.05, 0.05, 0.1);
            body.material = bodyMat;

            const head = BABYLON.MeshBuilder.CreateSphere("head", {diameter: 0.8}, scene);
            head.position.y = 3.3;
            const headMat = new BABYLON.StandardMaterial("headMat", scene);
            headMat.diffuseColor = new BABYLON.Color3(0.9, 0.7, 0.6);
            headMat.emissiveColor = new BABYLON.Color3(0.1, 0.05, 0.05);
            head.material = headMat;

            const leftArm = BABYLON.MeshBuilder.CreateCylinder("leftArm", {height: 2, diameter: 0.35}, scene);
            leftArm.position = new BABYLON.Vector3(-0.8, 2, 0);
            leftArm.rotation.z = 0.6;
            leftArm.material = bodyMat;

            const rightArm = BABYLON.MeshBuilder.CreateCylinder("rightArm", {height: 2, diameter: 0.35}, scene);
            rightArm.position = new BABYLON.Vector3(0.8, 2, 0);
            rightArm.rotation.z = -0.6;
            rightArm.material = bodyMat;

            const leftLeg = BABYLON.MeshBuilder.CreateCylinder("leftLeg", {height: 1.8, diameter: 0.4}, scene);
            leftLeg.position = new BABYLON.Vector3(-0.3, 0, 0);
            leftLeg.material = bodyMat;

            const rightLeg = BABYLON.MeshBuilder.CreateCylinder("rightLeg", {height: 1.8, diameter: 0.4}, scene);
            rightLeg.position = new BABYLON.Vector3(0.3, 0, 0);
            rightLeg.material = bodyMat;

            for (let i = 0; i < 10; i++) {
                const bill = BABYLON.MeshBuilder.CreatePlane("bill" + i, {width: 0.8, height: 0.4}, scene);
                const billMat = new BABYLON.StandardMaterial("billMat" + i, scene);
                billMat.diffuseColor = new BABYLON.Color3(0, 0.8, 0);
                billMat.emissiveColor = new BABYLON.Color3(0.3, 1, 0.3);
                bill.material = billMat;
                
                const side = i < 5 ? -1 : 1;
                bill.position = new BABYLON.Vector3(
                    side * (1.5 + Math.random() * 0.5),
                    2.5 + (i % 5) * 0.3,
                    (Math.random() - 0.5) * 0.5
                );
                
                scene.registerBeforeRender(() => {
                    bill.rotation.y += 0.03;
                    bill.position.y += Math.sin(Date.now() * 0.005 + i) * 0.003;
                    bill.position.x += Math.sin(Date.now() * 0.003 + i * 0.5) * 0.002;
                });
            }

            let angle = 0;
            scene.registerBeforeRender(() => {
                if (currentScene === 'intro') {
                    angle += 0.04;
                    body.rotation.y = Math.sin(angle) * 0.4;
                    head.position.y = 3.3 + Math.abs(Math.sin(angle * 2)) * 0.15;
                    
                    leftArm.rotation.z = 0.6 + Math.sin(angle * 2.5) * 0.4;
                    leftArm.rotation.x = Math.sin(angle * 1.5) * 0.3;
                    
                    rightArm.rotation.z = -0.6 - Math.sin(angle * 2.5) * 0.4;
                    rightArm.rotation.x = -Math.sin(angle * 1.5) * 0.3;
                    
                    body.position.y = 1.5 + Math.abs(Math.sin(angle * 3)) * 0.3;
                    
                    leftLeg.rotation.x = Math.sin(angle * 3) * 0.2;
                    rightLeg.rotation.x = -Math.sin(angle * 3) * 0.2;
                }
            });
        }

        function clearScene() {
            sceneObjects.forEach(obj => {
                if (obj.dispose) obj.dispose();
            });
            sceneObjects = [];
        }

        function changeScene(sceneName) {
            if (sceneName === currentScene) return;
            
            clearScene();
            currentScene = sceneName;

            document.querySelectorAll('.scene-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event?.target?.classList.add('active');

            const panel = document.getElementById('infoPanel');
            panel.classList.remove('visible');

            gsap.to(camera, {
                alpha: camera.alpha + 1,
                beta: Math.PI / 3,
                radius: 20,
                duration: 1.5,
                ease: "power2.inOut",
                onComplete: () => {
                    switch(sceneName) {
                        case 'accueil':
                            createAccueilScene();
                            break;
                        case 'epargne':
                            createEpargneScene();
                            break;
                        case 'prets':
                            createPretsScene();
                            break;
                        case 'investissement':
                            createInvestissementScene();
                            break;
                    }
                    
                    setTimeout(() => {
                        panel.classList.add('visible');
                    }, 500);
                }
            });
        }

        function createAccueilScene() {
            document.getElementById('panelTitle').textContent = 'Bienvenue chez FinanceBank';
            document.getElementById('panelDescription').textContent = 'Votre partenaire financier de confiance depuis 2010. D√©couvrez nos services innovants.';
            document.getElementById('panelStats').innerHTML = `
                <div class="stat"><span class="stat-label">Clients actifs</span><span class="stat-value">50,000+</span></div>
                <div class="stat"><span class="stat-label">Satisfaction</span><span class="stat-value">98%</span></div>
                <div class="stat"><span class="stat-label">Agences</span><span class="stat-value">150+</span></div>
            `;

            const ground = BABYLON.MeshBuilder.CreateGround("ground", {width: 30, height: 30}, scene);
            const groundMat = new BABYLON.StandardMaterial("groundMat", scene);
            groundMat.diffuseColor = new BABYLON.Color3(0.1, 0.15, 0.3);
            groundMat.specularColor = new BABYLON.Color3(0.2, 0.2, 0.3);
            ground.material = groundMat;
            ground.position.y = -1;
            sceneObjects.push(ground);

            for (let i = 0; i < 20; i++) {
                const size = 0.5 + Math.random() * 1.5;
                const shape = BABYLON.MeshBuilder.CreateBox("box" + i, {size: size}, scene);
                const mat = new BABYLON.StandardMaterial("mat" + i, scene);
                mat.diffuseColor = new BABYLON.Color3(
                    0.3 + Math.random() * 0.7,
                    0.5 + Math.random() * 0.5,
                    0.2 + Math.random() * 0.8
                );
                mat.emissiveColor = new BABYLON.Color3(0.1, 0.1, 0.2);
                shape.material = mat;
                
                const angle = (i / 20) * Math.PI * 2;
                const radius = 8 + Math.random() * 4;
                shape.position = new BABYLON.Vector3(
                    Math.cos(angle) * radius,
                    size / 2,
                    Math.sin(angle) * radius
                );
                
                sceneObjects.push(shape);
                
                const rotSpeed = {x: (Math.random() - 0.5) * 0.02, y: (Math.random() - 0.5) * 0.02};
                scene.registerBeforeRender(() => {
                    if (currentScene === 'accueil') {
                        shape.rotation.x += rotSpeed.x;
                        shape.rotation.y += rotSpeed.y;
                        shape.position.y = size / 2 + Math.sin(Date.now() * 0.001 + i) * 0.5;
                    }
                });
            }
        }

        function createEpargneScene() {
            document.getElementById('panelTitle').textContent = 'Comptes √âpargne';
            document.getElementById('panelDescription').textContent = 'Faites fructifier votre argent avec des taux attractifs et une disponibilit√© totale.';
            document.getElementById('panelStats').innerHTML = `
                <div class="stat"><span class="stat-label">Taux d'int√©r√™t</span><span class="stat-value">2.5%</span></div>
                <div class="stat"><span class="stat-label">D√©p√¥t minimum</span><span class="stat-value">100‚Ç¨</span></div>
                <div class="stat"><span class="stat-label">Disponibilit√©</span><span class="stat-value">24/7</span></div>
            `;

            const piggyBank = BABYLON.MeshBuilder.CreateSphere("piggy", {diameter: 3}, scene);
            piggyBank.position.y = 2;
            const piggyMat = new BABYLON.StandardMaterial("piggyMat", scene);
            piggyMat.diffuseColor = new BABYLON.Color3(1, 0.7, 0.8);
            piggyMat.emissiveColor = new BABYLON.Color3(0.2, 0.1, 0.15);
            piggyBank.material = piggyMat;
            sceneObjects.push(piggyBank);

            for (let i = 0; i < 30; i++) {
                const coin = BABYLON.MeshBuilder.CreateCylinder("coin" + i, {height: 0.1, diameter: 0.5}, scene);
                const coinMat = new BABYLON.StandardMaterial("coinMat" + i, scene);
                coinMat.diffuseColor = new BABYLON.Color3(1, 0.84, 0);
                coinMat.emissiveColor = new BABYLON.Color3(0.5, 0.42, 0);
                coinMat.specularColor = new BABYLON.Color3(1, 1, 0.5);
                coin.material = coinMat;
                
                const angle = (i / 30) * Math.PI * 2;
                const radius = 4 + (i % 3) * 1.5;
                coin.position = new BABYLON.Vector3(
                    Math.cos(angle) * radius,
                    0.5 + (i % 10) * 0.3,
                    Math.sin(angle) * radius
                );
                
                sceneObjects.push(coin);
                
                const baseY = coin.position.y;
                const speed = 0.001 + Math.random() * 0.002;
                scene.registerBeforeRender(() => {
                    if (currentScene === 'epargne') {
                        coin.rotation.y += 0.03;
                        coin.position.y = baseY + Math.sin(Date.now() * speed + i) * 0.5;
                    }
                });
            }

            scene.registerBeforeRender(() => {
                if (currentScene === 'epargne') {
                    piggyBank.rotation.y += 0.005;
                    piggyBank.position.y = 2 + Math.sin(Date.now() * 0.001) * 0.3;
                }
            });
        }

        function createPretsScene() {
            document.getElementById('panelTitle').textContent = 'Solutions de Pr√™ts';
            document.getElementById('panelDescription').textContent = 'Des pr√™ts adapt√©s √† vos besoins : immobilier, auto, personnel. R√©ponse rapide garantie.';
            document.getElementById('panelStats').innerHTML = `
                <div class="stat"><span class="stat-label">Taux d√®s</span><span class="stat-value">1.9%</span></div>
                <div class="stat"><span class="stat-label">Montant max</span><span class="stat-value">500K‚Ç¨</span></div>
                <div class="stat"><span class="stat-label">Dur√©e</span><span class="stat-value">5-30 ans</span></div>
            `;

            // Maison 3D
            const houseBase = BABYLON.MeshBuilder.CreateBox("houseBase", {width: 4, height: 3, depth: 4}, scene);
            houseBase.position.y = 1.5;
            const houseMat = new BABYLON.StandardMaterial("houseMat", scene);
            houseMat.diffuseColor = new BABYLON.Color3(0.9, 0.8, 0.7);
            houseMat.emissiveColor = new BABYLON.Color3(0.15, 0.13, 0.12);
            houseBase.material = houseMat;
            sceneObjects.push(houseBase);

            // Toit
            const roof = BABYLON.MeshBuilder.CreateCylinder("roof", {height: 4, diameterTop: 0, diameterBottom: 6, tessellation: 4}, scene);
            roof.position.y = 4;
            roof.rotation.y = Math.PI / 4;
            const roofMat = new BABYLON.StandardMaterial("roofMat", scene);
            roofMat.diffuseColor = new BABYLON.Color3(0.7, 0.2, 0.2);
            roofMat.emissiveColor = new BABYLON.Color3(0.1, 0.03, 0.03);
            roof.material = roofMat;
            sceneObjects.push(roof);

            // Porte
            const door = BABYLON.MeshBuilder.CreateBox("door", {width: 0.8, height: 1.5, depth: 0.1}, scene);
            door.position = new BABYLON.Vector3(0, 0.75, 2.05);
            const doorMat = new BABYLON.StandardMaterial("doorMat", scene);
            doorMat.diffuseColor = new BABYLON.Color3(0.4, 0.25, 0.1);
            door.material = doorMat;
            sceneObjects.push(door);

            // Voiture
            const carBody = BABYLON.MeshBuilder.CreateBox("carBody", {width: 2, height: 0.8, depth: 3.5}, scene);
            carBody.position = new BABYLON.Vector3(-5, 0.4, 0);
            const carMat = new BABYLON.StandardMaterial("carMat", scene);
            carMat.diffuseColor = new BABYLON.Color3(0.8, 0, 0);
            carMat.emissiveColor = new BABYLON.Color3(0.15, 0, 0);
            carBody.material = carMat;
            sceneObjects.push(carBody);

            // Toit voiture
            const carRoof = BABYLON.MeshBuilder.CreateBox("carRoof", {width: 1.8, height: 0.6, depth: 1.5}, scene);
            carRoof.position = new BABYLON.Vector3(-5, 1, 0);
            carRoof.material = carMat;
            sceneObjects.push(carRoof);

            // Roues
            for (let i = 0; i < 4; i++) {
                const wheel = BABYLON.MeshBuilder.CreateCylinder("wheel" + i, {height: 0.3, diameter: 0.7}, scene);
                wheel.rotation.z = Math.PI / 2;
                const x = -5 + (i % 2 === 0 ? -0.9 : 0.9);
                const z = i < 2 ? -1.3 : 1.3;
                wheel.position = new BABYLON.Vector3(x, 0.35, z);
                const wheelMat = new BABYLON.StandardMaterial("wheelMat" + i, scene);
                wheelMat.diffuseColor = new BABYLON.Color3(0.1, 0.1, 0.1);
                wheel.material = wheelMat;
                sceneObjects.push(wheel);
            }

            // Billets volants
            for (let i = 0; i < 15; i++) {
                const bill = BABYLON.MeshBuilder.CreatePlane("bill" + i, {width: 1, height: 0.5}, scene);
                const billMat = new BABYLON.StandardMaterial("billMat" + i, scene);
                billMat.diffuseColor = new BABYLON.Color3(0, 0.8, 0.3);
                billMat.emissiveColor = new BABYLON.Color3(0.2, 1, 0.4);
                bill.material = billMat;
                
                const angle = (i / 15) * Math.PI * 2;
                const radius = 6 + Math.random() * 2;
                bill.position = new BABYLON.Vector3(
                    Math.cos(angle) * radius,
                    2 + Math.random() * 3,
                    Math.sin(angle) * radius
                );
                
                sceneObjects.push(bill);
                
                const speed = 0.002 + Math.random() * 0.003;
                scene.registerBeforeRender(() => {
                    if (currentScene === 'prets') {
                        bill.rotation.y += 0.02;
                        bill.position.y += Math.sin(Date.now() * speed + i) * 0.005;
                    }
                });
            }

            scene.registerBeforeRender(() => {
                if (currentScene === 'prets') {
                    houseBase.rotation.y += 0.003;
                    roof.rotation.y += 0.003;
                    door.rotation.y = houseBase.rotation.y;
                    door.position.x = Math.sin(houseBase.rotation.y) * 2;
                    door.position.z = Math.cos(houseBase.rotation.y) * 2 + 0.05;
                }
            });
        }

        function createInvestissementScene() {
            document.getElementById('panelTitle').textContent = 'Investissement & Croissance';
            document.getElementById('panelDescription').textContent = 'Multipliez votre capital avec nos solutions d\'investissement personnalis√©es et s√©curis√©es.';
            document.getElementById('panelStats').innerHTML = `
                <div class="stat"><span class="stat-label">Rendement moyen</span><span class="stat-value">7.2%</span></div>
                <div class="stat"><span class="stat-label">Portefeuilles</span><span class="stat-value">5,000+</span></div>
                <div class="stat"><span class="stat-label">Expertise</span><span class="stat-value">15 ans</span></div>
            `;

            // Graphique 3D en barres
            for (let i = 0; i < 12; i++) {
                const height = 1 + Math.random() * 4;
                const bar = BABYLON.MeshBuilder.CreateBox("bar" + i, {width: 0.8, height: height, depth: 0.8}, scene);
                bar.position = new BABYLON.Vector3((i - 5.5) * 1.5, height / 2, 0);
                
                const barMat = new BABYLON.StandardMaterial("barMat" + i, scene);
                const greenValue = Math.min(1, height / 5);
                barMat.diffuseColor = new BABYLON.Color3(1 - greenValue, greenValue, 0.2);
                barMat.emissiveColor = new BABYLON.Color3((1 - greenValue) * 0.3, greenValue * 0.3, 0.05);
                bar.material = barMat;
                sceneObjects.push(bar);
                
                const baseHeight = height;
                scene.registerBeforeRender(() => {
                    if (currentScene === 'investissement') {
                        const newHeight = baseHeight + Math.sin(Date.now() * 0.002 + i) * 0.5;
                        bar.scaling.y = newHeight / baseHeight;
                        bar.position.y = newHeight / 2;
                    }
                });
            }

            // Fl√®che de croissance
            const arrow = BABYLON.MeshBuilder.CreateCylinder("arrow", {height: 8, diameterTop: 0, diameterBottom: 0.5, tessellation: 3}, scene);
            arrow.rotation.x = -Math.PI / 4;
            arrow.rotation.z = Math.PI / 2;
            arrow.position = new BABYLON.Vector3(0, 3, -5);
            const arrowMat = new BABYLON.StandardMaterial("arrowMat", scene);
            arrowMat.diffuseColor = new BABYLON.Color3(0, 1, 0.3);
            arrowMat.emissiveColor = new BABYLON.Color3(0, 0.5, 0.15);
            arrow.material = arrowMat;
            sceneObjects.push(arrow);

            // Particules dor√©es montantes
            for (let i = 0; i < 40; i++) {
                const particle = BABYLON.MeshBuilder.CreateSphere("particle" + i, {diameter: 0.2}, scene);
                const particleMat = new BABYLON.StandardMaterial("particleMat" + i, scene);
                particleMat.diffuseColor = new BABYLON.Color3(1, 0.84, 0);
                particleMat.emissiveColor = new BABYLON.Color3(1, 0.84, 0);
                particle.material = particleMat;
                
                particle.position = new BABYLON.Vector3(
                    (Math.random() - 0.5) * 10,
                    Math.random() * 2,
                    (Math.random() - 0.5) * 10
                );
                
                sceneObjects.push(particle);
                
                const speed = 0.01 + Math.random() * 0.02;
                scene.registerBeforeRender(() => {
                    if (currentScene === 'investissement') {
                        particle.position.y += speed;
                        if (particle.position.y > 6) {
                            particle.position.y = 0;
                        }
                        particle.rotation.y += 0.05;
                    }
                });
            }

            scene.registerBeforeRender(() => {
                if (currentScene === 'investissement') {
                    arrow.rotation.z = Math.PI / 2 + Math.sin(Date.now() * 0.001) * 0.1;
                    arrow.position.y = 3 + Math.sin(Date.now() * 0.002) * 0.5;
                }
            });
        }

        createScene();

        engine.runRenderLoop(() => {
            scene.render();
        });

        window.addEventListener("resize", () => {
            engine.resize();
        });

        // Modales
        function openModal(type) {
            const overlay = document.getElementById('overlay');
            overlay.classList.add('active');
            
            if (type === 'login') {
                document.getElementById('loginModal').classList.add('active');
            } else {
                document.getElementById('registerModal').classList.add('active');
            }
        }

        function closeModal() {
            document.getElementById('overlay').classList.remove('active');
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('registerModal').classList.remove('active');
        }

        document.getElementById('overlay').addEventListener('click', closeModal);

        // Rotation automatique douce de la cam√©ra
        setInterval(() => {
            if (camera && currentScene !== 'intro') {
                gsap.to(camera, {
                    alpha: camera.alpha + 0.5,
                    duration: 3,
                    ease: "power1.inOut"
                });
            }
        }, 10000);
    </script>
</body>
    </html>
